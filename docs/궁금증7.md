## ğŸ– ê¶ê¸ˆì¦ 7 : invalidateQueries ë©”ì†Œë“œë¡œ ì—¬ëŸ¬ ì¿¼ë¦¬ staleí•˜ê²Œ ë§Œë“¤ê¸°

ë§ˆì§€ë§‰ì— 3ì¤„ ìš”ì•½ì„ ë‹¬ì•„ ë‘ì—ˆìŠµë‹ˆë‹¤. ì •ë³´ë§Œì´ í•„ìš”í•˜ì‹œë‹¤ë©´ 3ì¤„ ìš”ì•½ì„ í™•ì¸í•´ì£¼ì‹œê³ , ê°œìš”ì™€ ê³ ë¯¼ ê²°ë¡ ì˜ ì´ë¥´ëŠ” ëª¨ë“  ê³¼ì •ì´ ê¶ê¸ˆí•˜ì‹œë‹¤ë©´ ì­‰ ì½ì–´ ì£¼ì‹­ì‡¼!!

## ê°œìš”

ë‹¤ìŒì€ ìš°ë¦¬ì˜ `useMutation` ê¸°ë°˜ì˜ ì»¤ìŠ¤í…€ í›…ì´ë‹¤. í”„ë¡œë•íŠ¸ë¥¼ ê°œë°œí•˜ë‹¤ë³´ë‹ˆ ë‹¤ìŒ ì½”ë“œì™€ ê°™ì´ ì—¬ëŸ¬ ê°œì˜ ì¿¼ë¦¬ë¥¼ `invalidation` í•´ì¤€ í›„ ì¬ê²€ì¦ í•´ì¤„ í•„ìš”ê°€ ìƒê²¼ë‹¤. ìµœì´ˆ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

```jsx
const QUERY_KEY = {
  /** MAIN KEY */
  coupon: "coupon",
  reservationList: "reservationList",
  couponList: "couponList",
  couponListByStatus: "couponListByStatus",

  /** SUB KEY */
  sent: "sent",
  received: "received",
};

export const useChangeCouponStatusMutation = (id: number) => {
  const queryClient = useQueryClient();
  const { coupon } = useFetchCoupon(id);
  const { me } = useFetchMe();
  const { showLoading, hideLoading } = useLoading();

  return useMutation(changeCouponStatus, {
    onSuccess() {
      const isSent = coupon?.sender.id === me?.id;

      queryClient.invalidateQueries([QUERY_KEY.coupon, id]);

      if (isSent) {
        queryClient.invalidateQueries([QUERY_KEY.reservationList]);
        queryClient.invalidateQueries([QUERY_KEY.couponList, QUERY_KEY.sent]);
        queryClient.invalidateQueries([
          QUERY_KEY.couponListByStatus,
          QUERY_KEY.sent,
        ]);

        return;
      }

      queryClient.invalidateQueries([QUERY_KEY.reservationList]);
      queryClient.invalidateQueries([QUERY_KEY.couponList, QUERY_KEY.received]);
      queryClient.invalidateQueries([
        QUERY_KEY.couponListByStatus,
        QUERY_KEY.received,
      ]);
    },
    onMutate() {
      showLoading();
    },
    onSettled() {
      hideLoading();
    },
  });
};
```

ìœ„ì™€ ê°™ì´ `invalidateQueries`ë¥¼ ê° ì¿¼ë¦¬ë³„ë¡œ í˜¸ì¶œí•˜ê³  ìˆë‹¤. ì´ë ‡ê²Œ ì‘ì„±í•˜ë‹¤ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œìƒí™©ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

- ì¿¼ë¦¬ í‚¤ê°€ ë°”ë€ŒëŠ” ê²½ìš° ë‘ ê³³ì„ ìˆ˜ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.

`invalidateQueries`ëŠ” ì—¬ëŸ¬ ê°œì˜ ì¿¼ë¦¬ë¥¼ ê°±ì‹ í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ìµœì´ˆ ì½”ë“œì™€ ê°™ì€ ìƒí™©ì„ ë°©ì§€í•˜ê³ ì íƒêµ¬ í›„ í”„ë¡œì íŠ¸ì˜ ì½”ë“œë¥¼ ë¦¬íŒ©í„°ë§ í•˜ê³ ì í•œë‹¤.

## íƒêµ¬ì™€ ì •ë¦¬

ë‹¨ì¼ ì¿¼ë¦¬ í‚¤ë¥¼ `refetch`í•˜ëŠ” ë°©ë²•ì€ ì•„ë˜ì™€ ê°™ë‹¤.

```jsx
queryClient.invalidateQueries([QUERY_KEY.reservationList]);
```

ì§ì ‘ í•œë²ˆ ì¿¼ë¦¬ë¥¼ `stale` í•˜ê²Œ ë§Œë“¤ì–´ ì¬ê²€ì¦í•´ë³´ì. ë‹¤ìŒì€ `PostContainer` ì»´í¬ë„ŒíŠ¸ì´ë©°, buttonì„ í´ë¦­í•˜ë©´ `createPost` ë™ì‘ì„ ìˆ˜í–‰í•˜ê³ , `posts` í‚¤ì˜ ì¿¼ë¦¬ë¥¼ `stale`í•˜ê²Œ ë§Œë“  í›„ ê°±ì‹ í•œë‹¤.

```jsx
// @components/post/PostContainer.js

const PostContainer = () => {
  const { posts } = useFetchPostList();

  const { createPost } = useCreatePost();

  const queryClient = useQueryClient();

  const onClickCreatePostButton = () => {
    const body = JSON.stringify({
      title: "foo",
      body: "bar",
      userId: 1,
    });

    const result = createPost(body);

    queryClient.invalidateQueries("posts");
  };

  return (
    <div>
      <button onClick={onClickCreatePostButton}>Post ìƒì„±í•˜ê¸°</button>
      <PostList posts={posts}></PostList>
      <PostList posts={postsSecond}></PostList>
    </div>
  );
};
```

â˜ºï¸**ì—¬ê¸°ì„œ ì ê¹** Stale í•´ì§€ë©´, í™œì„± ì¿¼ë¦¬ì˜ ê²½ìš° ì¬ê²€ì¦ì„ ì‹œë„í•œë‹¤. í”Œë¡œìš°ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. (êµ¬ì‹ì´ ëœë‹¤) -> (êµ¬ì‹ì˜ ë°ì´í„°ë¡œ ë Œë”ë§) -> ì¬ê²€ì¦(refetch) -> (ê°±ì‹ ëœ ë°ì´í„°ë¡œ ìºì‹œ ë°ì´í„°ë¥¼ ê°ˆì•„ ë¼ìš°ê³  ë Œë”ë§)

ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

<img src="../public/assets/1.png"/>

ê·¸ëŸ¼ í”„ë¡œì íŠ¸ì˜ ìƒí™©ê³¼ ë™ì¼í•˜ê²Œ ì—¬ëŸ¬ê°œì˜ ì¿¼ë¦¬ë¥¼ ê°±ì‹ í•´ì•¼í•œë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ? í”„ë¡œì íŠ¸ì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ê°±ì‹ í•´ë³¼ ìˆ˜ ìˆë‹¤. ë‹¤ìŒê³¼ ê°™ì´ ë§ì´ë‹¤.

```jsx
const PostContainer = () => {
  const { posts } = useFetchPostList();
  const { posts: postsSecond } = useFetchPostListSecond();

  const { createPost } = useCreatePost();

  const queryClient = useQueryClient();

  const onClickCreatePostButton = () => {
    const body = JSON.stringify({
      title: "foo",
      body: "bar",
      userId: 1,
    });

    const result = createPost(body);

    // ì—¬ëŸ¬ ê°œì˜ ì¿¼ë¦¬ë¥¼ ê°±ì‹ í•œë‹¤.

    queryClient.invalidateQueries("posts");
    queryClient.invalidateQueries("postsSecond");
  };

  return (
    <div>
      <button onClick={onClickCreatePostButton}>Post ìƒì„±í•˜ê¸°</button>
      <PostList posts={posts}></PostList>
      <PostList posts={postsSecond}></PostList>
    </div>
  );
};
```

ìœ„ì™€ ê°™ì´ ì‘ì„±í•˜ë©´ ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. `POST` ìš”ì²­ì„ í•˜ê²Œë˜ë©´ 'posts' 'postsSecond' í‚¤ì˜ ì¿¼ë¦¬ê°€ `stale` í•´ì§€ê³  í™œì„± ì¿¼ë¦¬ì´ê¸°ì— `revalidation` í•œë‹¤.

<img src="../public/assets/2.png"/>

ê·¸ë ‡ë‹´ ë¬¸ì œë¥¼ í•´ê²°í•´ë³´ì. `invalidateQueries`ì—ì„œ ì—¬ëŸ¬ê°œì˜ ì¿¼ë¦¬ë¥¼ í•œ ë²ˆì— ê°±ì‹ í•˜ëŠ” ê²ƒì´ ìš°ë¦¬ì˜ ë¬¸ì œ í•´ê²° ëª©í‘œì˜€ë‹¤. ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•´ë³´ë©´ ì–´ë–¨ê¹Œ ?

```jsx
const onClickCreatePostButton = () => {
  const body = JSON.stringify({
    title: "foo",
    body: "bar",
    userId: 1,
  });

  const result = createPost(body);

  // í•œ ë²ˆì˜ invalidateQueriesë¡œ ì—¬ëŸ¬ ê°œì˜ ì¿¼ë¦¬ë¥¼ ê°±ì‹ í•  ìˆ˜ ìˆëŠ”ì§€ í…ŒìŠ¤íŠ¸

  queryClient.invalidateQueries("posts");
};
```

ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ì´ ë‘ ë²ˆì§¸ ì¿¼ë¦¬ëŠ” ê°±ì‹ ë˜ì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.

<img src="../public/assets/3.png"/>

ê·¸ë ‡ë‹¤ë©´ ê²°êµ­ ì¸ìë¡œ ë„£ëŠ” ë¬¸ìì—´ì´ ì¼ì¹˜í•  ë•Œë§Œ í•´ë‹¹ ì¿¼ë¦¬ í‚¤ê°€ `stale`í•´ì§€ê³  `revalidation`ì´ ëœë‹¤ëŠ” ê²ƒ. ë¬¸ìì—´ë¡œ í‚¤ê°€ ê´€ë¦¬ë  ë•ŒëŠ” ì¡°ê¸ˆì€ ì •ë¦¬ê°€ ë˜ì—ˆë‹¤. ì¸ìë¡œ ë„£ëŠ” ë¬¸ìì—´ì˜ ê°’ì´ ì¼ì¹˜í•˜ëŠ” ì¿¼ë¦¬ë§Œ êµ¬ì‹ì´ë˜ê³  ì¬ê²€ì¦ ìš”ì²­ì˜ ëŒ€ìƒì´ ëœë‹¤ëŠ” ê²ƒ! ê·¸ë ‡ë‹¤ë©´ í”„ë¡œì íŠ¸ ìƒí™©ê³¼ ë™ì¼í•˜ê²Œ ì¿¼ë¦¬ì˜ í‚¤ê°€ ë°°ì—´ë¡œ ê´€ë¦¬ë˜ê³  ìˆì„ ë•ŒëŠ” ì–´ë– í• ê¹Œ?

### ê·¸ë“¤ì´ ë§í•˜ê¸¸

[Query invalidation](https://tanstack.com/query/v4/docs/guides/query-invalidation)

1. ëª¨ë“  í‚¤ì˜ ì¿¼ë¦¬ê°€ êµ¬ì‹ì´ë˜ê³  ì¬ê²€ì¦ ìš”ì²­ì˜ ëŒ€ìƒì´ ëœë‹¤.

```jsx
// ìºì‹œ ì•ˆì˜ ëª¨ë“  ì¿¼ë¦¬ê°€ êµ¬ì‹ì´ë˜ê³  ì¬ê²€ì¦ ìš”ì²­ì˜ ëŒ€ìƒì´ ëœë‹¤.
queryClient.invalidateQueries();
```

2. íŠ¹ì • ë¬¸ìì—´ ì„œë¸Œí‚¤ë¥¼ í¬í•¨í•˜ëŠ” ê²½ìš°ì—ë§Œ êµ¬ì‹ì´ë˜ê³  ì¬ê²€ì¦ ìš”ì²­ì˜ ëŒ€ìƒì´ëœë‹¤.

```jsx
// í‚¤ ë°°ì—´ì˜ ì²« ë²ˆì§¸ ì›ì†Œê°€ 'todos'ë¼ë©´ êµ¬ì‹ì´ ë˜ê³  ì¬ê²€ì¦ ìš”ì²­ì˜ ëŒ€ìƒì´ëœë‹¤.
queryClient.invalidateQueries(["todos"]);

// í‚¤ ë°°ì—´ì˜ ì²« ë²ˆì§¸ ì›ì†Œê°€ 'todos' ì´ë©´ì„œ ë‘ ë²ˆì§¸ ì›ì†Œê°€ {type:'done'} ì˜ ê°ì²´ì—¬ì•¼í•¨. ë‚˜ë¨¸ì§€ ê²½ìš°ëŠ” ì•ˆëœë‹¤.
queryClient.invalidateQueries(["todos", { type: "done" }]);
```

3. ì •í™•íˆ ì¼ì¹˜í•˜ëŠ” ê²½ìš°ì—ë§Œ êµ¬ì‹ì´ë˜ê³  ì¬ê²€ì¦ ìš”ì²­ì˜ ëŒ€ìƒì´ ëœë‹¤.

```jsx
queryClient.invalidateQueries(["todos"], { exact: true });
```

ì¿¼ë¦¬ í‚¤ë¥¼ ë°°ì—´ë¡œ ê´€ë¦¬í•  ë•Œ ìƒê°í•´ë³¼ ìˆ˜ ìˆëŠ” ì‹œë‚˜ë¦¬ì˜¤ëŠ” ìœ„ ì„¸ ê°œì¸ ê²ƒ ê°™ë‹¤. ê·¸ëŸ¼ ì´ì œ ì„ íƒí•  ì°¨ë¡€ì´ë‹¤.

## íŒ€ì˜ ì„ íƒ

ë¬¸ì„œë¥¼ ì½ê³  ë¶„ì„í•´ë³¸ í˜„ì¬ ë°©ì‹ì„ ì •ë¦¬í•˜ìë©´ ì•„ë˜ì™€ ê°™ë‹¤. (ì£¼ì„ì„ ë³´ë¼)

```jsx
 onSuccess() {
      const isSent = coupon?.sender.id === me?.id;

      // ì²« ë²ˆì§¸ ì›ì†Œê°€ QUERYKEY.coupon ì´ë©´ì„œ ë‘ ë²ˆì§¸ ì›ì†Œê°€ id ê°’ì´ê¸°ë§Œ í•˜ë©´ êµ¬ì‹ì´ ëœë‹¤.
      queryClient.invalidateQueries([QUERY_KEY.coupon, id]);

      if (isSent) {
        // ì²« ë²ˆì§¸ ì›ì†Œê°€ QUERY_KEY.reservationListì™€ ê°™ë‹¤ë©´ êµ¬ì‹ì´ ëœë‹¤.
        queryClient.invalidateQueries([QUERY_KEY.reservationList]);
        // ì²« ë²ˆì§¸ ì›ì†Œ, ë‘ ë²ˆì§¸ ì›ì†Œê°€ QUERY_KEY.couponList, QUERY_KEY.sentì™€ ê°™ë‹¤ë©´ êµ¬ì‹ì´ ëœë‹¤.
        queryClient.invalidateQueries([QUERY_KEY.couponList, QUERY_KEY.sent]);
        // ì²« ë²ˆì§¸ ì›ì†Œ, ë‘ ë²ˆì§¸ ì›ì†Œê°€  QUERY_KEY.couponListByStatus, QUERY_KEY.sent,ì™€ ê°™ë‹¤ë©´ êµ¬ì‹ì´ ëœë‹¤.
        queryClient.invalidateQueries([
          QUERY_KEY.couponListByStatus,
          QUERY_KEY.sent,
        ]);

        return;
      }

      // if ë¬¸ì˜ ìƒí™©ê³¼ ë™ì¼í•˜ë‹¤.
      queryClient.invalidateQueries([QUERY_KEY.reservationList]);
      queryClient.invalidateQueries([QUERY_KEY.couponList, QUERY_KEY.received]);
      queryClient.invalidateQueries([
        QUERY_KEY.couponListByStatus,
        QUERY_KEY.received,
      ]);
    },
```

ê·¸ë ‡ë‹¤ë©´ í˜„ì¬ ë°©ì‹ì—ì„œ ë¬¸ì œê°€ ë  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì´ ëŠ˜ì–´ë‚¬ë‹¤.

1. ì¤‘ë³µìœ¼ë¡œ ì¸í•´ ìœ ì§€ë³´ìˆ˜ê°€ í˜ë“¤ì–´ì¡Œë‹¤. (ê¸°ì¡´ ë¬¸ì œ)
2. **ì¿¼ë¦¬ í‚¤ ë°°ì—´ì„ í¬í•¨í•˜ëŠ” ë°°ì—´ì˜ ì¿¼ë¦¬ë¼ë©´ ì˜ë„í•˜ì§€ ì•Šì•˜ì–´ë„ êµ¬ì‹ì´ ëœë‹¤.**

### 1ë²ˆ ë¬¸ì œ í•´ê²°í•˜ê¸°

1ë²ˆ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„  QUERY_KEY ê°ì²´ì˜ ê°’ì„ ë°”ê¿€ í•‹ìš”ê°€ ìˆë‹¤. í˜„ì¬ ì¿¼ë¦¬ í‚¤ ìƒí™©ì´ë¼ë©´ couponê³¼ reservationListì˜ ì¿¼ë¦¬ ë°ì´í„°ë¥¼ êµ¬ì‹ìœ¼ë¡œ ë§Œë“¤ê³  ì‹¶ì„ ë•Œ ë‘ ë²ˆì˜ ë©”ì†Œë“œ í˜¸ì¶œì´ í•„ìš”í•˜ë‹¤.

TO BE

```jsx
const QUERY_KEY = {
  /** MAIN KEY */
  coupon: "coupon",
  reservationList: "reservationList",
  couponList: "couponList",
  couponListByStatus: "couponListByStatus",

  /** SUB KEY */
  sent: "sent",
  received: "received",
};

export const useFetchCoupon = (id: number) => {
  const { data } = useQuery([QUERY_KEY.coupon, id], () => getCoupon(id), {
    staleTime: 10000,
  });

  return {
    coupon: data,
  };
};

export const useFetchReservationList = () => {
  const { data, isLoading } = useQuery(
    [QUERY_KEY.reservationList],
    () => getReservationList(),
    {
      staleTime: 10000,
    }
  );

  return {
    reservationList: data?.data ?? [],
    isLoading,
  };
};
```

ë§Œì•½ í•œ ë²ˆì˜ `invalidateQueries`ì˜ í˜¸ì¶œë¡œ ë‘ ì¿¼ë¦¬ê°€ ê°™ì´ ê°±ì‹ ë˜ê²Œ êµ¬í˜„í•˜ê³  ì‹¶ë‹¤ë©´ ë‘ê°œì˜ **ì¿¼ë¦¬ í‚¤ ë°°ì—´**ì˜ ìƒí™©ê³¼ **ì¿¼ë¦¬ í‚¤ ìƒìˆ˜ ê°’**ì„ ìˆ˜ì •í•´ì¤„ í•„ìš”ê°€ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ìë©´ ì•„ë˜ì™€ ê°™ì´ í•´ë³¼ ìˆ˜ ìˆë‹¤.

AS IS

```jsx
export const useFetchCoupon = (id: number) => {
  // invalidateQueries([QUERY_KEY.coupon])ë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ë©´ êµ¬ì‹ì´ ëœë‹¤!!
  const { data } = useQuery([QUERY_KEY.coupon, id], () => getCoupon(id), {
    staleTime: 10000,
  });

  return {
    coupon: data,
  };
};

export const useFetchReservationList = () => {
  // invalidateQueries([QUERY_KEY.coupon])ë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ë©´ êµ¬ì‹ì´ ëœë‹¤!!
  const { data, isLoading } = useQuery(
    [QUERY_KEY.coupon, QUERY_KEY.reservationList],
    () => getReservationList(),
    {
      staleTime: 10000,
    }
  );

  return {
    reservationList: data?.data ?? [],
    isLoading,
  };
};
```

`invalidateQueries` í•œ ë²ˆì˜ í˜¸ì¶œë¡œë„ ë‘ ê°œì˜ ì¿¼ë¦¬ë¥¼ êµ¬ì‹ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

### 2ë²ˆ ë¬¸ì œ í•´ê²°í•˜ê¸°

ë‘ ë²ˆì§¸ ë¬¸ì œ ì˜€ë˜ <**ì¿¼ë¦¬ í‚¤ ë°°ì—´ì„ í¬í•¨í•˜ëŠ” ë°°ì—´ì˜ ì¿¼ë¦¬ë¼ë©´ ì˜ë„í•˜ì§€ ì•Šì•˜ì–´ë„ êµ¬ì‹ì´ ëœë‹¤.**>ëŠ” í™•ì‹¤íˆ ì¹˜ëª…ì ì´ë‹¤. ìš°ë¦¬ê°€ ì˜ë„í•˜ì§€ ì•ŠìŒì—ë„ êµ¬ì‹ì´ ëœë‹¤ë©´ `refetch` ë™ì‘ì´ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ë¶ˆí•„ìš”í•œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì˜ íšŸìˆ˜ê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤.

ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì´ í”„ë¡œë•ì…˜ ì½”ë“œë¥¼ ìˆ˜ì •í•œë‹¤ë©´ ì •í™•íˆ ìš°ë¦¬ê°€ ì˜ë„í•œëŒ€ë¡œë§Œ ë™ì‘í•  ìˆ˜ ìˆë‹¤.

```jsx
 onSuccess() {
      const isSent = coupon?.sender.id === me?.id;


      queryClient.invalidateQueries([QUERY_KEY.coupon, id],{exact : true});

      if (isSent) {
        queryClient.invalidateQueries([QUERY_KEY.reservationList],{exact : true});

        queryClient.invalidateQueries([QUERY_KEY.couponList, QUERY_KEY.sent],{exact : true});

        queryClient.invalidateQueries([
          QUERY_KEY.couponListByStatus,
          QUERY_KEY.sent,
        ],{exact : true});

        return;
      }
    /*...*/
    },
```

ì–´ë–¤ ì¡°ê±´ì—ì„œ `invalidateQueries`ê°€ ì¿¼ë¦¬ ë°ì´í„°ë¥¼ êµ¬ì‹ìœ¼ë¡œ ë§Œë“œëŠ” ì§€ ì•Œê²Œë˜ë‹ˆ ì˜ë„ì¹˜ ì•ŠëŠ” ë™ì‘ì„ ë°©ì§€í•  ìˆ˜ ìˆë‹¤!

## ì–»ì€ ì 

- `invalidateQueries` ì— `exact : true` ì˜µì…˜ì„ ì£¼ë©´ ì •í™•íˆ í‚¤ ë°°ì—´ê³¼ ì¼ì¹˜í•˜ëŠ” ê²½ìš°ì—ë§Œ ì¿¼ë¦¬ë°ì´í„°ê°€ êµ¬ì‹ì´ ëœë‹¤.(ì¼ì¹˜í•˜ëŠ” : ë°°ì—´ì˜ ì›ì†Œ êµ¬ì„±ì´ ê°™ê³ , ê·¸ ê°’ì´ ê°™ì€ ê²½ìš°)

- `invalidateQueries` ì— ë°°ì—´ í‚¤ë¥¼ ë„£ìœ¼ë©´ ì›ì†Œ êµ¬ì„±ì„ í¬í•¨í•˜ëŠ” í˜•íƒœì˜ ì¿¼ë¦¬ í‚¤ ë°°ì—´ì„ ê°€ì§„ ì¿¼ë¦¬ ë°ì´í„°ê°€ êµ¬ì‹ì´ ëœë‹¤. (ì˜ë„ì¹˜ ì•ŠëŠ” ì¿¼ë¦¬ ë°ì´í„° êµ¬ì‹ ê¸°ëŠ¥ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.)

- `invalidateQueries` ì— ì›ì‹œ ê°’ì„ ë„£ìœ¼ë©´ ì •í™•íˆ ì¼ì¹˜í•˜ëŠ” ì¿¼ë¦¬ì˜ ê²½ìš°ì—ë§Œ êµ¬ì‹ì´ ëœë‹¤.

## ì•ìœ¼ë¡œ ì •ë¦¬í•´ë³¼ ê²ƒ

ì¿¼ë¦¬ í‚¤ë¥¼ ê°ì²´ë¡œ ê´€ë¦¬í•˜ëŠ” ìƒí™©ì´ë¼ë©´ ?
